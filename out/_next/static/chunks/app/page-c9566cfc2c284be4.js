(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8503:function(e,t,n){Promise.resolve().then(n.bind(n,4677))},4677:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var a=n(7437),r=n(2265),s=n(4040);function i(e,t){if(!t)return"K"===e.rank;let n=["K","Q","J","10","9","8","7","6","5","4","3","2","A"];return n.indexOf(e.rank)===n.indexOf(t.rank)+1&&function(e,t){let n=["♥","♦"];return n.includes(e.suit)&&!n.includes(t.suit)||!n.includes(e.suit)&&n.includes(t.suit)}(e,t)}function l(e,t){if(0===t.length)return"A"===e.rank;let n=t[t.length-1],a=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];return e.suit===n.suit&&a.indexOf(e.rank)===a.indexOf(n.rank)+1}var o=n(1994),c=n(3335);function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,c.m6)((0,o.W)(t))}class u{static getInstance(e){return u.instance||(u.instance=new u(e)),u.instance}selectRandomValue(){let e=Math.floor(Math.random()*this.values.length);this.randomValue=this.values[e]}getRandomValue(){return this.randomValue}constructor(e){this.values=e,this.randomValue=null,this.selectRandomValue()}}class f{static getInstance(){return f.instance||(f.instance=new f),f.instance}setWin(e){this.isWin=e}getWin(){return this.isWin}constructor(){this.isWin=!1}}function g(e){let{cards:t,onClick:n,onDrop:s,children:i,isDrawPile:l,isFoundation:o}=e,[c,g]=r.useState(!1),h=u.getInstance(["bg-face1","bg-face2","bg-face3","bg-face4"]),x=(e,n)=>{let r=o||l;return(0,a.jsx)("div",{className:d("absolute w-24 h-36 rounded-lg border-2 border-gray-300 select-none",e.faceUp?"bg-white":"".concat(h.getRandomValue()),r?"left-0 top-0":"left-0",n===t.length-1&&"z-10"),style:r?{top:"".concat(0*n,"px"),left:"".concat(0*n,"px")}:{top:"".concat(30*n,"px")},children:e.faceUp&&(0,a.jsx)("div",{className:d("flex items-center justify-center w-full h-full text-4xl font-bold select-none","♥"===e.suit||"♦"===e.suit?"text-red-500":"text-black"),children:"".concat(e.rank).concat(e.suit)})},"".concat(e.suit,"-").concat(e.rank))};return(0,a.jsxs)("div",{onDragOver:e=>{e.preventDefault(),g(!0)},onDragLeave:()=>{g(!1)},onDrop:e=>{e.preventDefault(),g(!1);let{cards:t,fromPile:n}=JSON.parse(e.dataTransfer.getData("text/plain"));s&&s(t,n)},onClick:n,className:d("relative w-24 h-36 rounded-lg transition-all duration-200 select-none",c&&"ring-2 ring-yellow-400",0===t.length?"bg-green-600 border-2 border-dashed border-green-400":"bg-transparent",l&&"cursor-pointer hover:ring-2 hover:ring-yellow-400 hover:shadow-lg",n&&"cursor-pointer hover:shadow-lg"),children:[(()=>{let e=f.getInstance();if(console.log(e.getWin()),e.getWin()){let e=Array.from({length:30},(e,t)=>(0,a.jsx)("div",{className:"win-card",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(5*Math.random(),"s")},children:(0,a.jsx)("div",{className:"bg-joker absolute rounded-lg w-[92px] h-[142px]"})},t));return(0,a.jsx)("div",{className:"win-animation",children:e})}})(),t.map((e,t)=>x(e,t)),t.length>0&&!o&&!l&&(0,a.jsx)("div",{className:"absolute bottom-50 right-0 bg-white rounded-full px-2 py-1 text-xs font-bold z-20",children:t.length}),i]})}function h(e){let{card:t,index:n,pileIndex:s,onDragStart:i}=e,[l,o]=r.useState(!1);return(0,a.jsx)("div",{draggable:!0,onDragStart:e=>{o(!0),i(e,t,s)},onDragEnd:()=>o(!1),style:{position:"absolute",top:"".concat(30*n,"px"),zIndex:n+10},className:d("w-24 h-36 bg-white shadow-md rounded-lg border-2 border-gray-300 flex items-center justify-center cursor-move transition-all duration-200 select-none",l&&"shadow-lg transform scale-105"),children:(0,a.jsxs)("div",{className:"relative w-full h-full p-2",children:[(0,a.jsx)("div",{className:d("absolute top-1 left-1 text-s font-bold","♥"===t.suit||"♦"===t.suit?"text-red-500":"text-black"),children:"".concat(t.rank).concat(t.suit)}),(0,a.jsx)("div",{className:d("absolute top-1 right-1 text-s font-bold text-right","♥"===t.suit||"♦"===t.suit?"text-red-500":"text-black"),children:"".concat(t.rank).concat(t.suit)}),(0,a.jsx)("div",{className:d("absolute inset-0 flex items-center justify-center text-4xl font-bold","♥"===t.suit||"♦"===t.suit?"text-red-500":"text-black"),children:"".concat(t.rank).concat(t.suit)}),(0,a.jsx)("div",{className:d("absolute bottom-1 left-1 text-s font-bold transform rotate-180","♥"===t.suit||"♦"===t.suit?"text-red-500":"text-black"),children:"".concat(t.rank).concat(t.suit)}),(0,a.jsx)("div",{className:d("absolute bottom-1 right-1 text-s font-bold text-right transform rotate-180","♥"===t.suit||"♦"===t.suit?"text-red-500":"text-black"),children:"".concat(t.rank).concat(t.suit)})]})})}var x=n(5293);let p=(0,n(7712).j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=r.forwardRef((e,t)=>{let{className:n,variant:r,size:s,asChild:i=!1,...l}=e,o=i?x.g7:"button";return(0,a.jsx)(o,{className:d(p({variant:r,size:s,className:n})),ref:t,...l})});function b(){let[e,t]=r.useState([]),[n,s]=r.useState(Array(7).fill([])),[o,c]=r.useState([,,,,].fill([])),[d,u]=r.useState([]),x=r.useRef(null);r.useEffect(()=>{b()},[]);let p=()=>{if(console.log("Checking Winning"),o.every(e=>13===e.length)){var e;console.log("YOU WON!!!"),f.getInstance().setWin(!0),null===(e=x.current)||void 0===e||e.click()}};r.useEffect(()=>{p()},[o]);let b=()=>{let e=function(){let e=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],t=[];for(let n of["♠","♥","♦","♣"])for(let a of e)t.push({suit:n,rank:a,faceUp:!1});return function(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}(t)}(),n=Array(7).fill([]).map(()=>[]);f.getInstance().setWin(!1);for(let t=0;t<7;t++)for(let a=t;a<7;a++){let r=e.pop();t===a?r.faceUp=!0:r.faceUp=!1,n[a].push(r)}t(e),s(n),c([,,,,].fill([])),u([])},v=(e,t,a,r)=>{if(r){let r=[...n],l=r[t],o=r[a];if(i(e[0],o[o.length-1])){let n=l.findIndex(t=>t.suit===e[0].suit&&t.rank===e[0].rank);r[t]=l.slice(0,n),r[a]=[...o,...e],r[t].length>0&&!r[t][r[t].length-1].faceUp&&(r[t][r[t].length-1].faceUp=!0),s(r)}}else{let r=[...o];if(1===e.length&&l(e[0],r[a])){r[a]=[...r[a],e[0]];let i=[...n],l=i[t],o=l.findIndex(t=>t.suit===e[0].suit&&t.rank===e[0].rank);i[t]=l.slice(0,o),i[t].length>0&&!i[t][i[t].length-1].faceUp&&(i[t][i[t].length-1].faceUp=!0),s(i),c(r)}}p()},k=(e,t,a)=>{if(a){let a=[...n],r=a[t];i(e,r[r.length-1])&&(a[t]=[...r,e],s(a),u(d.slice(0,-1)))}else{let n=[...o];l(e,n[t])&&(n[t]=[...n[t],e],c(n),u(d.slice(0,-1)))}},j=(e,t,a)=>{let r=n[a],s=r.findIndex(e=>e.suit===t.suit&&e.rank===t.rank),i=r.slice(s);e.dataTransfer.setData("text/plain",JSON.stringify({cards:i,fromPile:a}))};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-green-800 to-green-600 p-2",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-8 text-white text-center",children:"Klondike Solitaire"}),(0,a.jsx)(m,{onClick:b,className:"mb-8 w-full",children:"New Game"}),(0,a.jsxs)("div",{className:"min-h-[700px] bg-green-700 rounded-lg shadow-lg p-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-5 mb-8",children:[o.map((e,t)=>(0,a.jsx)(g,{cards:e,faceUp:!0,isFoundation:!0,pileIndex:t,onDrop:(e,n)=>{-1===n?k(e[0],t,!1):v(e,n,t,!1)}},"foundation-".concat(t))),(0,a.jsxs)("div",{className:"col-span-3 flex justify-end space-x-4",children:[(0,a.jsx)(g,{cards:e,faceUp:!1,onClick:()=>{if(0===e.length)t(d.reverse().map(e=>({...e,faceUp:!1}))),u([]);else{let n=e.pop();n.faceUp=!0,u([...d,n]),t([...e])}},isDrawPile:!0,pileIndex:-2}),(0,a.jsx)(g,{cards:d,faceUp:!0,isDrawPile:!0,pileIndex:-1,children:d.length>0&&(0,a.jsx)(h,{card:d[d.length-1],index:0,pileIndex:-1,onDragStart:e=>{e.dataTransfer.setData("text/plain",JSON.stringify({cards:[d[d.length-1]],fromPile:-1}))}})})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-4",children:n.map((e,t)=>(0,a.jsx)(g,{cards:e,faceUp:!0,pileIndex:t,onDrop:(e,n)=>{-1===n?k(e[0],t,!0):v(e,n,t,!0)},children:e.map((e,n)=>e.faceUp&&(0,a.jsx)(h,{card:e,index:n,pileIndex:t,onDragStart:j},"".concat(e.suit,"-").concat(e.rank)))},"tableau-".concat(t)))})]}),(0,a.jsx)(m,{ref:x,onClick:()=>{let a=[...e,...d,...n.flat()],r=[,,,,].fill(null).map(()=>[]);a.sort((e,t)=>{let n=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],a=["♥","♦","♣","♠"],r=a.indexOf(e.suit)-a.indexOf(t.suit);return 0!==r?r:n.indexOf(e.rank)-n.indexOf(t.rank)}).forEach(e=>{let t=["♥","♦","♣","♠"].indexOf(e.suit);-1!==t&&r[t].push({...e,faceUp:!0})}),c(r),s(Array(7).fill([])),t([]),u([])},className:"w-0 h-0 border-0 shadow-none bg-transparent absolute top-0 left-0 m-0"})]})})}function v(){return r.useEffect(()=>{let e=document.getElementById("app");e&&(0,s.createRoot)(e).render((0,a.jsx)(b,{}))},[]),(0,a.jsx)("div",{id:"app",className:"min-h-screen bg-gradient-to-b from-green-800 to-green-600 p-8"})}m.displayName="Button"}},function(e){e.O(0,[660,971,117,744],function(){return e(e.s=8503)}),_N_E=e.O()}]);